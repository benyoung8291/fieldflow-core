@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Premrest Brand Color System */
    --background: 0 0% 100%;
    --foreground: 200 5% 19%;

    --card: 0 0% 100%;
    --card-foreground: 200 5% 19%;

    --popover: 0 0% 100%;
    --popover-foreground: 200 5% 19%;

    /* Premrest Primary Terracotta */
    --primary: 21 63% 53%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 21 63% 48%;
    
    /* Premrest Secondary Olive Green */
    --secondary: 69 36% 58%;
    --secondary-foreground: 0 0% 100%;
    --secondary-hover: 69 36% 53%;

    /* Neutral Grays */
    --muted: 240 7% 89%;
    --muted-foreground: 200 5% 40%;

    --accent: 34 90% 77%;
    --accent-foreground: 200 5% 19%;

    /* Status Colors */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;
    
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;

    /* Borders & Inputs */
    --border: 240 7% 89%;
    --input: 240 7% 89%;
    --ring: 21 63% 53%;

    --radius: 0.75rem;

    /* Sidebar - references system colours */
    --sidebar-background: var(--foreground);
    --sidebar-foreground: var(--background);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--muted);
    --sidebar-accent-foreground: var(--muted-foreground);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--primary);

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(21 63% 53%), hsl(21 63% 63%));
    --gradient-accent: linear-gradient(135deg, hsl(34 90% 77%), hsl(34 90% 87%));
    
    /* Shadows - Apple/Google inspired */
    --shadow-xs: 0 1px 2px 0 hsl(200 5% 19% / 0.04);
    --shadow-sm: 0 2px 4px 0 hsl(200 5% 19% / 0.06);
    --shadow-md: 0 4px 12px 0 hsl(200 5% 19% / 0.08);
    --shadow-lg: 0 8px 24px 0 hsl(200 5% 19% / 0.1);
    --shadow-xl: 0 16px 48px 0 hsl(200 5% 19% / 0.12);
    
    /* Transitions - Apple/Google inspired */
    --transition-base: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-smooth: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    --transition-snappy: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-spring: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    
    /* Micro-interactions */
    --hover-lift: translateY(-2px);
    --hover-scale: scale(1.02);
    --active-scale: scale(0.96);
    --tap-scale: scale(0.98);
    
  /* Mobile-specific */
  --mobile-header-height: 56px;
  --mobile-nav-height: 64px;
  --mobile-touch-target: 44px;
  --mobile-content-top: 64px;
  
  /* Slack Color System */
  --slack-aubergine: 300 34% 37%;
  --slack-aubergine-light: 300 30% 42%;
  --slack-hover: 289 50% 28%;
  --slack-active: 199 89% 38%;
  --slack-online: 152 69% 42%;
  --slack-text: 0 0% 100%;
  --slack-text-muted: 0 0% 100% / 0.7;
  --slack-border: 0 0% 100% / 0.1;
  --slack-avatar: 240 5% 65%;
  --slack-avatar-foreground: 0 0% 100%;
  }

  .dark {
    --background: 200 5% 12%;
    --foreground: 0 0% 98%;

    --card: 200 5% 16%;
    --card-foreground: 0 0% 98%;

    --popover: 200 5% 16%;
    --popover-foreground: 0 0% 98%;

    --primary: 21 63% 58%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 21 63% 63%;

    --secondary: 69 36% 63%;
    --secondary-foreground: 0 0% 100%;
    --secondary-hover: 69 36% 68%;

    --muted: 200 5% 22%;
    --muted-foreground: 240 7% 70%;

    --accent: 34 90% 82%;
    --accent-foreground: 200 5% 19%;

    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 100%;
    
    --success: 142 76% 41%;
    --success-foreground: 0 0% 100%;
    
    --warning: 38 92% 55%;
    --warning-foreground: 0 0% 100%;
    
    --info: 199 89% 53%;
    --info-foreground: 0 0% 100%;

    --border: 200 5% 25%;
    --input: 200 5% 25%;
    --ring: 21 63% 58%;

    --sidebar-background: var(--card);
    --sidebar-foreground: var(--card-foreground);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--accent);
    --sidebar-accent-foreground: var(--accent-foreground);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--primary);
    
    /* Slack Color System - Dark mode */
    --slack-aubergine: 300 34% 37%;
    --slack-aubergine-light: 300 30% 42%;
    --slack-hover: 289 50% 23%;
    --slack-active: 199 89% 38%;
    --slack-online: 152 69% 42%;
    --slack-text: 0 0% 100%;
    --slack-text-muted: 0 0% 100% / 0.7;
    --slack-border: 0 0% 100% / 0.1;
    --slack-avatar: 240 5% 50%;
    --slack-avatar-foreground: 0 0% 100%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    transition: none !important;
  }
  
  /* Safe area insets for mobile devices (iPhone notches, rounded corners) */
  :root {
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
  }
  
  /* Disable all transitions during theme changes */
  html[style*="color-scheme"] * {
    transition: none !important;
  }
  
  /* Only allow icon transitions */
  .disable-transitions * {
    transition: none !important;
  }
}

/* Rich text editor styles - Gmail quality */
.rich-text-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Gmail-style toolbar */
.rich-text-editor.gmail-style .ql-toolbar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 2px;
  padding: 6px 8px;
  border: none;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.3);
  flex-shrink: 0;
}

/* Toolbar format groups with separators */
.rich-text-editor.gmail-style .ql-toolbar .ql-formats {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  margin-right: 8px;
  padding-right: 8px;
  border-right: 1px solid hsl(var(--border) / 0.5);
}

.rich-text-editor.gmail-style .ql-toolbar .ql-formats:last-child {
  border-right: none;
  margin-right: 0;
  padding-right: 0;
}

/* Gmail-style toolbar buttons */
.rich-text-editor.gmail-style .ql-toolbar button {
  width: 28px;
  height: 28px;
  padding: 4px;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, color 0.15s ease;
}

.rich-text-editor.gmail-style .ql-toolbar button:hover {
  background: hsl(var(--accent));
}

.rich-text-editor.gmail-style .ql-toolbar button.ql-active {
  background: hsl(var(--primary) / 0.15);
  color: hsl(var(--primary));
}

.rich-text-editor.gmail-style .ql-toolbar button.ql-active .ql-stroke {
  stroke: hsl(var(--primary));
}

.rich-text-editor.gmail-style .ql-toolbar button.ql-active .ql-fill {
  fill: hsl(var(--primary));
}

/* Undo/Redo buttons */
.rich-text-editor.gmail-style .ql-toolbar button.ql-undo,
.rich-text-editor.gmail-style .ql-toolbar button.ql-redo {
  width: 28px;
  height: 28px;
}

/* Dropdown pickers - Font, Size, Color, Alignment */
.rich-text-editor.gmail-style .ql-toolbar .ql-picker {
  height: 28px;
  border-radius: 4px;
  font-size: 13px;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-picker:hover {
  background: hsl(var(--accent));
}

.rich-text-editor.gmail-style .ql-toolbar .ql-picker-label {
  padding: 0 8px;
  display: flex;
  align-items: center;
  border: none;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-picker-options {
  background: hsl(var(--popover));
  border: 1px solid hsl(var(--border));
  border-radius: 6px;
  box-shadow: 0 4px 12px hsl(var(--foreground) / 0.1);
  padding: 4px;
  margin-top: 4px;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-picker-item {
  padding: 6px 12px;
  border-radius: 4px;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-picker-item:hover {
  background: hsl(var(--accent));
}

/* Color picker styling */
.rich-text-editor.gmail-style .ql-toolbar .ql-color-picker,
.rich-text-editor.gmail-style .ql-toolbar .ql-background {
  width: auto;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-color-picker .ql-picker-options,
.rich-text-editor.gmail-style .ql-toolbar .ql-background .ql-picker-options {
  padding: 6px;
  width: auto;
}

.rich-text-editor.gmail-style .ql-toolbar .ql-color-picker .ql-picker-item,
.rich-text-editor.gmail-style .ql-toolbar .ql-background .ql-picker-item {
  width: 20px;
  height: 20px;
  border-radius: 3px;
  margin: 2px;
  padding: 0;
}

/* Font size labels */
.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-label[data-value="small"]::before,
.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-item[data-value="small"]::before {
  content: 'Small';
}

.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-label:not([data-value])::before,
.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-item:not([data-value])::before {
  content: 'Normal';
}

.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-label[data-value="large"]::before,
.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-item[data-value="large"]::before {
  content: 'Large';
}

.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-label[data-value="huge"]::before,
.rich-text-editor.gmail-style .ql-toolbar .ql-size .ql-picker-item[data-value="huge"]::before {
  content: 'Huge';
}

/* Container styling */
.rich-text-editor.gmail-style .ql-container {
  border: none;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  font-family: inherit;
}

/* Editor area */
.rich-text-editor.gmail-style .ql-editor {
  flex: 1;
  min-height: 0;
  padding: 12px 16px;
  font-size: 14px;
  line-height: 1.6;
  overflow-y: auto;
}

.rich-text-editor.gmail-style .ql-editor.ql-blank::before {
  color: hsl(var(--muted-foreground));
  font-style: normal;
  left: 16px;
}

/* SVG icon colors */
.rich-text-editor.gmail-style .ql-stroke {
  stroke: hsl(var(--foreground));
}

.rich-text-editor.gmail-style .ql-fill {
  fill: hsl(var(--foreground));
}

.rich-text-editor.gmail-style .ql-picker-label {
  color: hsl(var(--foreground));
}

/* Dark mode refinements */
.dark .rich-text-editor.gmail-style .ql-toolbar {
  background: hsl(var(--muted) / 0.2);
  border-color: hsl(var(--border));
}

.dark .rich-text-editor.gmail-style .ql-toolbar button:hover {
  background: hsl(var(--accent));
}

.dark .rich-text-editor.gmail-style .ql-stroke {
  stroke: hsl(var(--foreground));
}

.dark .rich-text-editor.gmail-style .ql-fill {
  fill: hsl(var(--foreground));
}

.dark .rich-text-editor.gmail-style .ql-picker-label,
.dark .rich-text-editor.gmail-style .ql-picker-item {
  color: hsl(var(--foreground));
}

.dark .rich-text-editor.gmail-style .ql-picker-options {
  background: hsl(var(--popover));
  border-color: hsl(var(--border));
}

/* Legacy non-gmail-style support */
.rich-text-editor:not(.gmail-style) .ql-toolbar {
  @apply rounded-t-md border-border bg-muted/50;
  flex-shrink: 0;
}

.rich-text-editor:not(.gmail-style) .ql-container {
  @apply rounded-b-md border-border bg-background;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.rich-text-editor:not(.gmail-style) .ql-editor {
  @apply text-sm;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}

.rich-text-editor:not(.gmail-style) .ql-editor.ql-blank::before {
  @apply text-muted-foreground italic;
}

.dark .rich-text-editor:not(.gmail-style) .ql-toolbar {
  @apply bg-muted/30;
}

.dark .rich-text-editor:not(.gmail-style) .ql-stroke {
  @apply stroke-foreground;
}

.dark .rich-text-editor:not(.gmail-style) .ql-fill {
  @apply fill-foreground;
}

.dark .rich-text-editor:not(.gmail-style) .ql-picker-label {
  @apply text-foreground;
}

/* Snippet card styles in rich text editor */
.rich-text-editor .ql-editor table[style*="border"] {
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
  overflow: hidden;
}

.rich-text-editor .ql-editor table {
  border-collapse: separate;
  border-spacing: 0;
}

/* Custom keepHTML blot for card snippets */
.rich-text-editor .ql-editor .ql-keep-html {
  display: block;
  margin: 8px 0;
  padding: 0;
  user-select: none;
  cursor: default;
}

.rich-text-editor .ql-editor .ql-keep-html table {
  width: 100%;
  border-collapse: collapse;
}

.rich-text-editor .ql-editor .ql-keep-html td {
  padding: 8px 12px;
  vertical-align: top;
}
/* Safe area utilities for mobile devices */
@layer utilities {
  .pb-safe {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .pt-safe {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .pl-safe {
    padding-left: max(1rem, env(safe-area-inset-left));
  }
  
  .pr-safe {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  .px-safe {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  .py-safe {
    padding-top: max(1rem, env(safe-area-inset-top));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  /* Mobile spacing rhythm - 8px base unit */
  .space-mobile-xs { margin: 0.5rem; }
  .space-mobile-sm { margin: 0.75rem; }
  .space-mobile-md { margin: 1rem; }
  .space-mobile-lg { margin: 1.5rem; }
  .space-mobile-xl { margin: 2rem; }
  
  /* Mobile page layout */
  .mobile-page-content {
    padding-top: var(--mobile-content-top);
  }
  
  /* Touch targets */
  .touch-target {
    min-height: var(--mobile-touch-target);
    min-width: var(--mobile-touch-target);
  }
  
  /* Smooth transitions */
  .transition-smooth {
    transition: var(--transition-smooth);
  }
  
  .transition-snappy {
    transition: var(--transition-snappy);
  }
  
  .transition-spring {
    transition: var(--transition-spring);
  }
  
  /* Mobile interactions */
  .mobile-tap {
    transition: transform 0.1s ease, background-color 0.2s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  .mobile-tap:active {
    transform: var(--tap-scale);
  }
  
  /* Hover lift effect */
  .hover-lift {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .hover-lift:hover {
    transform: var(--hover-lift);
    box-shadow: var(--shadow-md);
  }
  
  .hover-lift:active {
    transform: var(--active-scale);
  }
  
  /* Card interactions */
  .card-interactive {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }
  
  .card-interactive:hover {
    box-shadow: var(--shadow-md);
  }
  
  .card-interactive:active {
    transform: scale(0.98);
    box-shadow: var(--shadow-sm);
  }
}
